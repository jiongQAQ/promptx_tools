@startuml
!theme plain

start
:用户浏览菜品;
:点击菜品卡片;
:进入菜品详情页;
:查看菜品信息和评价;

:点击评价按钮;
:弹出评价对话框;
:选择评分星级(1-5星);
:输入评价内容;

if (上传图片?) then (是)
  :选择照片(最多3张);
  :上传图片;
else (否)
endif

:点击提交按钮;
:前端验证表单;
:发送评价数据;

|后端系统|
:接收评价数据;
:敏感词检测;

if (包含敏感词?) then (是)
  :设置状态为待审核;
  :提示正在审核;
else (否)
  :设置状态为已发布;
  :保存评价到数据库;
  :异步更新菜品平均分;
  :关闭对话框;
  :刷新评价列表;
  :显示最新评价;
endif

stop
@enduml
@startuml
!theme plain
skinparam backgroundColor White
skinparam activity {
  BackgroundColor #E1F5FE
  BorderColor #0277BD
  FontSize 12
}
skinparam arrow {
  Color #0277BD
  FontSize 10
}
skinparam diamond {
  BackgroundColor #FFF3E0
  BorderColor #F57C00
  FontSize 11
}
skinparam linetype ortho

title 系统管理功能活动图

start

:管理员登录系统;
:验证管理员身份和权限;

if (权限验证通过?) then (否)
  :返回权限不足提示;
  stop
else (是)
  :选择管理功能模块;

  if (功能模块?) then (用户管理)
    :选择用户管理操作;
    if (操作类型?) then (查看用户列表)
      :多维度筛选和排序;
      :返回用户信息列表;
    elseif (操作类型?) then (启用/禁用账户)
      :选择目标用户;
      :二次密码认证;
      if (认证通过?) then (是)
        :更新用户状态;
        :记录操作日志;
        :发送状态变更通知;
      else (否)
        :操作取消;
      endif
    else (重置用户密码)
      :选择目标用户;
      :二次密码认证;
      if (认证通过?) then (是)
        :生成安全临时密码;
        :通过安全渠道发送;
        :记录密码重置日志;
      else (否)
        :操作取消;
      endif
    endif

  elseif (功能模块?) then (数据统计)
    :选择统计维度;
    if (统计类型?) then (用户行为统计)
      :生成活跃用户数据;
      :分析用户活跃度分布;
      :展示新增用户趋势;
    elseif (统计类型?) then (评价数据统计)
      :统计评价数量趋势;
      :分析评分分布;
      :生成热门菜品排行;
      :评价质量分析;
    elseif (统计类型?) then (投诉处理统计)
      :统计投诉量变化;
      :分析处理效率;
      :问题类型分布;
      :满意度指标分析;
    else (系统性能统计)
      :监控API响应时间;
      :检查数据库连接状态;
      :系统资源使用分析;
      :错误日志统计;
    endif

    :支持自定义时间范围;
    :提供多格式导出;
    :实时数据刷新;

  elseif (功能模块?) then (系统配置)
    :选择配置项目;
    if (配置类型?) then (基础设置)
      :修改系统名称、Logo等;
    elseif (配置类型?) then (安全参数)
      :设置密码复杂度要求;
      :配置会话超时时间;
      :登录失败锁定策略;
    else (业务参数)
      :评价字数限制配置;
      :图片上传大小限制;
      :敏感词过滤等级设置;
    endif

    :输入修改理由说明;
    :管理员密码确认;
    if (密码确认通过?) then (是)
      :保存配置修改;
      :记录配置变更日志;
      :支持配置历史版本管理;
    else (否)
      :配置修改取消;
    endif

  else (日志管理)
    :选择日志查询类型;
    if (日志类型?) then (操作日志)
      :管理员操作记录查询;
      :支持多维度筛选;
    elseif (日志类型?) then (安全日志)
      :异常登录监测记录;
      :安全事件告警日志;
    else (系统日志)
      :系统运行日志;
      :错误异常日志;
    endif

    :加密存储保护;
    :防止修改和删除;
    :支持日志分析和导出;
  endif
endif

if (敏感操作检测?) then (是)
  :触发安全告警;
  :要求高级管理员审批;
  if (审批通过?) then (是)
    :继续执行操作;
  else (否)
    :操作被阻止;
    :记录阻止日志;
  endif
else (否)
  :正常执行完成;
endif

if (异常登录检测?) then (是)
  :自动触发账户保护;
  :发送安全告警通知;
  :记录安全事件日志;
endif

stop

@enduml
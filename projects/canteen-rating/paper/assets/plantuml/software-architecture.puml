@startuml
!theme plain
skinparam componentStyle rectangle
skinparam backgroundColor White
skinparam component {
  BackgroundColor #F5F5F5
  BorderColor #424242
  FontSize 12
}
skinparam package {
  BackgroundColor #E3F2FD
  BorderColor #1976D2
  FontSize 13
}
skinparam arrow {
  Color #1976D2
  FontSize 10
}
skinparam linetype ortho

title 高校食堂评价系统软件逻辑架构

package "表现层 (Presentation Layer)" {
  package "Vue.js前端应用" {
    component [Vue组件管理] as VueComponents
    component [Vue Router路由] as VueRouter
    component [Pinia状态管理] as PiniaState
  }

  package "Spring Boot RESTful API" {
    component [AuthController] as AuthCtrl
    component [UserController] as UserCtrl
    component [RatingController] as RatingCtrl
    component [CanteenController] as CanteenCtrl
    component [ComplaintController] as ComplaintCtrl
  }

  component [跨域支持CORS] as CORS
  component [Spring Security认证] as Security
}

package "业务层 (Business Layer)" {
  component [UserService] as UserSvc
  component [RatingService] as RatingSvc
  component [CanteenService] as CanteenSvc
  component [StallService] as StallSvc
  component [DishService] as DishSvc
  component [ComplaintService] as ComplaintSvc
  component [SensitiveWordService] as SensitiveSvc
  component [StatisticsService] as StatSvc

  note right of UserSvc : 用户认证管理\n注册、登录、权限验证
  note right of RatingSvc : 菜品评价管理\n评价发布、查询、统计
  note right of ComplaintSvc : 投诉处理服务\n受理、流转、反馈
}

package "数据层 (Data Layer)" {
  package "MyBatis Plus数据访问" {
    component [UserMapper] as UserMap
    component [RatingMapper] as RatingMap
    component [CanteenMapper] as CanteenMap
    component [StallMapper] as StallMap
    component [DishMapper] as DishMap
    component [ComplaintMapper] as ComplaintMap
  }

  database "MySQL 8.3.0数据库" {
    [用户表 users]
    [食堂表 canteens]
    [档口表 stalls]
    [菜品表 dishes]
    [评价表 ratings]
    [投诉表 complaints]
    [敏感词表 sensitive_words]
  }
}

' 依赖关系（单向依赖）
VueComponents --> AuthCtrl
VueComponents --> UserCtrl
VueComponents --> RatingCtrl
VueComponents --> CanteenCtrl
VueComponents --> ComplaintCtrl

Security --> AuthCtrl
CORS --> AuthCtrl

AuthCtrl --> UserSvc
UserCtrl --> UserSvc
RatingCtrl --> RatingSvc
CanteenCtrl --> CanteenSvc
CanteenCtrl --> StallSvc
ComplaintCtrl --> ComplaintSvc

UserSvc --> UserMap
RatingSvc --> RatingMap
RatingSvc --> DishMap
CanteenSvc --> CanteenMap
StallSvc --> StallMap
DishSvc --> DishMap
ComplaintSvc --> ComplaintMap

UserMap --> [用户表 users]
RatingMap --> [评价表 ratings]
CanteenMap --> [食堂表 canteens]
StallMap --> [档口表 stalls]
DishMap --> [菜品表 dishes]
ComplaintMap --> [投诉表 complaints]

@enduml
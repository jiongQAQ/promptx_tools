{
  "id": "5.2.2",
  "title": "实现过程",
  "text": "食堂与档口管理模块的后端实现包括CanteenController和StallController两个控制器，分别处理食堂和档口相关请求。CanteenController提供/api/admin/canteen的增删改查接口，使用@PostMapping、@PutMapping、@DeleteMapping、@GetMapping注解标注。Service层CanteenServiceImpl实现业务逻辑，调用CanteenMapper接口操作数据库。前端使用Element Plus的el-table展示食堂列表，支持分页查询，使用el-dialog实现新增/编辑弹窗，使用el-upload实现图片上传。档口管理类似，档口列表额外显示所属食堂信息，通过关联查询实现。列表支持按名称模糊搜索、按状态筛选功能。实现效果如图所示，展示了食堂管理界面和档口管理界面。",
  "word_limit": 300,
  "imagePath": "${impl}/impl-canteen-stall.png",
  "content": "食堂与档口管理模块的实现分为后端API开发和前端界面开发两部分，通过RESTful接口实现前后端交互。\n\n后端实现包括CanteenController和StallController两个控制器类，分别处理食堂和档口相关的HTTP请求。CanteenController使用@RestController和@RequestMapping(\"/api/admin/canteen\")注解标注，定义了基础路径。实现了完整的CRUD接口：使用@PostMapping注解的add方法处理食堂新增请求，接收CanteenDTO对象，调用CanteenService的save方法保存到数据库；使用@PutMapping(\"/{id}\")注解的update方法处理食堂修改请求，接收id路径参数和CanteenDTO对象，调用Service的updateById方法；使用@DeleteMapping(\"/{id}\")注解的delete方法处理删除请求，调用Service的removeById方法执行逻辑删除；使用@GetMapping注解的list方法处理列表查询请求，支持分页参数和查询条件，调用Service的page方法返回分页数据；使用@GetMapping(\"/{id}\")注解的getById方法查询单个食堂详情。\n\nService层的CanteenServiceImpl类实现了CanteenService接口，同时继承ServiceImpl<CanteenMapper, Canteen>基类。在实现业务逻辑时，对输入数据进行校验，如检查食堂名称是否重复、营业时间格式是否正确等。在删除食堂时，需要先检查该食堂下是否还有档口，如果有则不允许删除，提示需要先删除档口。在查询时，可以根据食堂名称进行模糊搜索，根据状态进行筛选，使用MyBatis Plus的QueryWrapper构造查询条件。CanteenMapper接口继承BaseMapper<Canteen>，获得基础的数据操作方法。\n\nStallController和StallService的实现与CanteenController类似，但档口管理有其特殊之处。在新增和修改档口时，需要验证所属的食堂ID是否存在，通过CanteenService查询食堂信息进行验证。在查询档口列表时，支持按所属食堂ID筛选，返回特定食堂下的所有档口。档口列表的VO对象中，除了档口自身的信息外，还需要包含所属食堂的名称，通过关联查询或在Service层手动组装实现。\n\n前端实现使用Vue 3的Composition API和Element Plus组件库。食堂管理页面使用el-table组件展示食堂列表，配置columns定义表格列（食堂名称、位置、状态、操作等）。使用el-pagination组件实现分页功能，监听page-change和size-change事件，更新查询参数并重新请求数据。列表上方提供搜索表单，使用el-input组件输入食堂名称进行模糊搜索，使用el-select组件选择状态进行筛选，点击查询按钮触发搜索。操作列提供编辑和删除按钮，点击编辑按钮时，使用el-dialog组件弹出编辑对话框，对话框内使用el-form和el-form-item组件构建表单，通过v-model双向绑定表单数据。表单中使用el-upload组件实现图片上传，配置action为上传接口地址，before-upload钩子函数验证图片格式和大小，on-success钩子函数处理上传成功后的逻辑。点击保存按钮时，调用Axios发送POST或PUT请求，请求成功后关闭对话框，刷新列表数据并显示成功提示。\n\n档口管理界面的实现与食堂管理类似，但档口表单中增加了所属食堂的选择器。使用el-select组件展示食堂列表，组件挂载时调用接口加载所有食堂数据，用户从下拉列表中选择所属食堂。档口列表通过el-table-column的formatter属性或作用域插槽，展示所属食堂的名称而非ID，提升用户体验。列表支持按名称模糊搜索和按状态筛选，通过el-form实现筛选表单。\n\n模块实现效果如图所示，展示了食堂管理界面和档口管理界面的实际截图。食堂管理界面展示了食堂列表、新增食堂对话框和图片上传功能。档口管理界面展示了档口列表和所属食堂的关联显示效果，验证了层级关系管理的正确性。",
  "docx_type": "subsection_title",
  "docx_type_text": "body_text",
  "docx_type_desc": "body_text"
}
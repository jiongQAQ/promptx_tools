{
  "id": "4.4",
  "title": "系统类图",
  "text": "类图（Class Diagram）是UML中最常用的图之一，用于描述系统的静态结构。本系统采用分层架构，类图展示了Controller、Service、Mapper和Entity各层的核心类及其关系。Entity层包含User、Canteen、Stall、Dish、Rating、Complaint、SensitiveWord等实体类，使用MyBatis Plus注解定义表映射关系。Mapper层接口继承BaseMapper<T>，提供基础CRUD方法。Service层分为接口和实现类，ServiceImpl继承ServiceImpl<Mapper, Entity>并实现自定义Service接口，包含业务逻辑。Controller层注入Service接口，处理HTTP请求，返回统一的Result对象。类之间通过依赖、关联和继承关系连接，体现了分层架构和依赖倒置原则。",
  "word_limit": 280,
  "imagePath": "${uml}/class-diagram.png",
  "content": "类图（Class Diagram）是统一建模语言（UML）中最常用的图之一，用于描述系统的静态结构，包括系统中的类、类的属性和方法，以及类之间的关系。类图是面向对象系统设计的核心工具，能够直观地展示系统的架构和代码组织方式。\n\n本系统采用分层架构设计，类图完整展示了Controller层、Service层、Mapper层和Entity层的核心类及其相互关系。整个类图体现了系统的分层思想和依赖倒置原则，高层模块依赖于抽象接口而非具体实现，保证了系统的灵活性和可扩展性。\n\n在Entity层，系统定义了七个实体类：User（用户）、Canteen（食堂）、Stall（档口）、Dish（菜品）、Rating（评价）、Complaint（投诉）、SensitiveWord（敏感词）。这些实体类与数据库表一一对应，使用MyBatis Plus提供的注解进行对象关系映射（ORM）。每个实体类使用@TableName注解指定对应的数据库表名，使用@TableId注解标注主键字段并指定主键生成策略为自增（IdType.AUTO），使用@TableField注解定义字段映射关系，使用@TableLogic注解标记逻辑删除字段。实体类之间通过字段体现关系，如Stall类包含canteenId字段表示所属食堂，Dish类包含stallId字段表示所属档口。\n\nMapper层定义了数据访问接口，每个实体对应一个Mapper接口。Mapper接口继承MyBatis Plus提供的BaseMapper<T>泛型接口，T为对应的实体类型。通过继承BaseMapper，Mapper接口自动获得了insert、deleteById、updateById、selectById、selectList等基础CRUD方法，无需编写任何SQL语句或XML配置。对于基础方法无法满足的复杂查询，可以在Mapper接口中定义自定义方法，使用@Select等注解编写SQL或在XML文件中配置。\n\nService层分为接口和实现类两部分。Service接口定义了业务方法的契约，如UserService接口定义了register、login、getUserById等方法。Service实现类（如UserServiceImpl）实现Service接口，同时继承MyBatis Plus提供的ServiceImpl<Mapper, Entity>基类，这样既获得了MyBatis Plus提供的批量操作等增强方法，又实现了自定义的业务逻辑。Service实现类通过@Service注解标注为Spring的服务组件，通过@Autowired注解注入Mapper接口。在Service层实现业务逻辑，包括数据验证、事务管理、业务规则处理等。\n\nController层负责处理HTTP请求。每个Controller类使用@RestController注解标注，表示该类是RESTful控制器，方法返回值自动序列化为JSON。使用@RequestMapping注解定义基础URL路径。Controller类通过@Autowired注解注入Service接口（而非实现类），遵循依赖倒置原则。Controller方法使用@GetMapping、@PostMapping、@PutMapping、@DeleteMapping等注解标注HTTP方法和路径，使用@RequestBody接收JSON请求体，使用@PathVariable接收路径参数，使用@RequestParam接收查询参数。方法返回统一封装的Result对象，包含code状态码、msg消息和data数据，便于前端统一处理。\n\n类与类之间通过多种UML关系连接。依赖关系（虚线箭头）表示Controller依赖于Service接口，Service依赖于Mapper接口。关联关系（实线）表示实体之间的业务关联，如Rating关联User和Dish。继承关系（空心三角箭头）表示ServiceImpl继承ServiceImpl基类，Mapper接口继承BaseMapper接口。这些关系清晰地展示了系统的分层架构和模块依赖关系。\n\n系统类图如图所示，完整展示了系统的类结构和层次关系，为系统的实现提供了清晰的设计蓝图。"
}
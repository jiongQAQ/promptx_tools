{
  "id": "5.4.2",
  "title": "实现过程",
  "text": "评价管理模块的后端实现在评价控制器中，提供用户接口和管理员接口。用户提交评价时，服务实现类调用敏感词服务检测内容，使用DFA算法实现高效匹配。检测通过的评价状态设为已发布，否则设为待审核。评价保存后异步更新菜品表的平均分和评价数。前端用户界面使用评分组件实现星级评分，文本域输入评价内容，上传组件上传图片。评价列表使用时间轴组件展示，管理员审核界面使用表格组件展示待审核评价。",
  "word_limit": 300,
  "imagePath": "${impl}/impl-rating.png",
  "content": "评价管理模块的实现涉及评价提交、敏感词过滤、异步统计等技术要点。后端评价控制器分为用户接口和管理员接口两部分。用户提交评价接口接收评价数据，包含菜品ID、评分、内容、图片等。Service层首先验证菜品存在且已上架，验证用户未重复评价。\n\n然后调用敏感词服务检测评价内容。敏感词服务使用DFA（确定性有限自动机）算法实现高效匹配，时间复杂度为O(n)。检测到敏感词时评价状态设为待审核，否则设为已发布。评价保存后，使用异步方法更新菜品评分统计，使用SQL聚合函数计算平均分和评价数。\n\n前端用户界面使用评分组件实现星级评分，文本域输入评价内容并限制字数，上传组件上传图片并限制数量。评价列表使用时间轴组件展示，显示用户信息、评分、内容和图片，支持下拉加载更多。管理员审核界面使用表格组件展示待审核评价，提供通过和拒绝操作，使用抽屉组件显示详情。",
  "docx_type": "subsection_title",
  "docx_type_text": "body_text",
  "docx_type_desc": "body_text"
}

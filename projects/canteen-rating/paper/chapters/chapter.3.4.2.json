{
  "id": "3.4.2",
  "title": "数据库逻辑设计",
  "text": "以总体ER图呈现所有实体与关系（含主外键与多对多桥表），确保关键路径可追踪与约束一致性，建立完整的数据模型。",
  "imagePath": "${uml}/er-overall.png",
  "word_limit": 310,
  "content": "数据库逻辑设计通过总体ER图全面展示了食堂评价系统的数据模型架构，建立了完整、一致的实体关系网络。在主外键关系设计上，系统建立了清晰的层次化结构：食堂与档口存在一对多关系（canteen.id → stall.canteen_id），档口与菜品存在一对多关系（stall.id → dish.stall_id），用户与评价存在一对多关系（user.id → rating.user_id），菜品与评价存在一对多关系（dish.id → rating.dish_id），用户与投诉存在一对多关系（user.id → complaint.user_id）。这种设计确保了数据的参照完整性和业务逻辑的一致性。在约束一致性方面，系统实现了多层次的数据完整性保障：主键约束保证实体唯一性，外键约束保证参照完整性，非空约束保证必要字段的数据质量，数值范围约束保证业务规则的遵守（如评分1-5分范围），唯一性约束防止重复数据（如用户名唯一）。在关键路径可追溯性方面，ER图明确展示了主要的业务查询路径：用户→评价→菜品→档口→食堂的完整链路支持根据用户查询其所有评价记录，菜品→评价的反向关系支持菜品的评价统计分析，食堂→档口→菜品的级联关系支持食堂层面的数据聚合查询，用户→投诉的关系链支持问题反馈的全程追踪。整个数据模型设计遵循第三范式的规范化原则，消除了数据冗余和更新异常，保证了数据存储的高效性和一致性。"
}
{
  "id": "5.6.2",
  "title": "实现过程",
  "text": "系统管理模块的后端实现分布在多个控制器中。管理员控制器提供用户管理接口，支持分页查询、角色分配、状态更新。敏感词控制器提供敏感词CRUD接口，使用本地缓存加速敏感词检测。统计控制器提供统计数据接口，执行复杂的SQL聚合查询，返回时间序列数据和排行榜数据。文件上传控制器处理文件上传，使用文件对象接收文件，保存到指定目录，返回访问URL。系统使用日志框架记录关键操作，记录操作人、时间、操作内容、执行结果到日志文件。前端使用ECharts的折线图、柱状图、饼图展示统计数据。敏感词管理使用表格组件和标签组件展示列表。实现效果如图所示，展示了统计分析仪表盘和敏感词管理界面。",
  "word_limit": 300,
  "imagePath": "${impl}/impl-system-admin.png",
  "content": "系统管理模块的实现分散在多个控制器中，每个控制器负责一类管理功能，通过统一的权限控制确保只有系统管理员可以访问。\n\n在用户管理的后端实现中，管理员控制器提供用户管理路径下的接口。实现GET接口查询用户列表，支持分页参数和筛选条件（角色、状态、关键词），使用查询构造器构造查询，模糊匹配方法实现模糊搜索，相等匹配方法实现精确匹配。实现PUT接口处理角色分配，接收用户ID和新角色，更新用户表的角色字段。实现PUT接口处理状态更新，切换用户的启用禁用状态。实现PUT接口重置密码，生成默认密码，使用加密算法加密后更新到数据库，同时设置强制修改密码标记，用户下次登录时强制修改密码。\n\n在敏感词管理的后端实现中，敏感词控制器提供敏感词管理接口。实现标准的CRUD接口，支持敏感词的增删改查。为了提升敏感词检测性能，系统使用缓存技术。在应用启动时，敏感词服务从数据库加载所有启用状态的敏感词，构建DFA自动机，存储在内存中。当检测评价内容时，直接使用内存中的DFA进行匹配，避免每次都查询数据库。当管理员新增、修改或删除敏感词时，除了更新数据库，还要清除缓存并重新构建DFA，使用缓存清除注解实现缓存失效，初始化后执行注解的方法在Bean初始化时加载数据。敏感词支持正则表达式匹配，提高过滤效果。\n\n在统计分析的后端实现中，统计控制器提供统计分析路径下的多个接口。实现用户趋势接口，执行SQL查询，返回时间序列数据。实现评价趋势接口，统计每天的评价数量。实现投诉统计接口，使用聚合查询各状态投诉数量，计算处理率（已处理数/总数×100%）。实现菜品排行接口，使用排序查询高分菜品和低分菜品。使用可缓存注解缓存统计结果，设置有效期为5分钟，避免频繁执行复杂查询。\n\n在文件管理的实现中，文件上传控制器提供文件上传接口处理文件上传。使用文件对象接收前端上传的文件，验证文件类型和大小。生成唯一的文件名，保存文件到服务器的指定目录，返回文件的访问URL。配置静态资源映射，使上传的图片可以通过URL直接访问。文件服务记录文件的元数据（文件名、大小、上传时间、关联对象），便于后续管理和清理。\n\n在应用日志记录的实现中，系统使用日志框架（如Logback或Log4j2）记录关键操作信息。在关键业务方法中，通过日志记录器输出日志信息，包含操作时间、操作用户、操作类型、操作描述、请求参数、返回结果、执行耗时、IP地址等。日志输出到文件系统，按日期滚动归档，便于问题追踪和审计。日志级别分为DEBUG、INFO、WARN、ERROR，关键业务操作使用INFO级别记录，异常信息使用ERROR级别记录。\n\n前端实现使用ECharts图表库进行数据可视化。在统计分析页面，引入图表库，创建图表容器DOM元素，使用初始化方法初始化图表实例。配置选项对象定义图表类型、数据、样式等。折线图用于展示趋势数据，配置X轴为时间轴，Y轴为数值轴，系列为数据系列。柱状图用于展示排行数据。饼图用于展示占比数据，配置标签显示百分比。图表支持响应式，监听窗口尺寸变化事件调用图表调整大小方法。数据通过Axios从后端API获取，使用挂载钩子初次加载，提供刷新按钮手动更新数据。\n\n敏感词管理界面使用表格组件展示敏感词列表，使用标签组件标识敏感词类型，不同类型显示不同颜色。启用状态使用开关组件快速切换。新增和编辑敏感词使用对话框组件，表单中包括敏感词内容输入、类型选择、状态设置。\n\n管理员可以通过服务器访问日志文件，查看系统运行日志和操作记录。日志文件按日期存储，保留最近30天的日志。通过日志分析工具可以搜索关键词、筛选日志级别、定位异常信息，辅助问题排查和系统监控。\n\n模块实现效果如图所示，展示了用户管理界面、统计分析仪表盘（包括折线图、柱状图、饼图等多种图表）、敏感词管理列表、系统日志查询界面，验证了系统管理模块的完整性和实用性。",
  "docx_type": "subsection_title",
  "docx_type_text": "body_text",
  "docx_type_desc": "body_text"
}
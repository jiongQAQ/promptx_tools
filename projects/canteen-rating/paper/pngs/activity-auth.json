{
  "id": "4.1.1",
  "title": "用户认证管理的详细设计",
  "text": "以活动图刻画用户登录注册、权限验证、JWT认证等主干流程，体现前后置条件与责任主体，覆盖异常与补偿路径。",
  "imagePath": "${uml}/activity-auth.png",
  "imagePathSequence": "${uml}/sequence-auth.png",
  "word_limit": 450,
  "content": "用户认证管理作为系统的安全基石，在详细设计中采用了精密的流程控制和完备的异常处理机制。用户注册流程的详细设计包含多个关键环节：首先，系统对用户输入进行全面校验，包括学号格式验证、密码复杂度检查和姓名格式规范；其次，进行学号唯一性检查，避免重复注册；再次，采用BCrypt算法对密码进行加密存储；最后，创建用户记录并返回注册结果。在异常处理方面，系统对参数校验失败、用户名重复、数据库异常等情况均有明确的处理策略和错误返回。用户登录流程采用基于JWT的无状态认证方案，实现了高效的身份认证机制。具体流程包括：用户提交登录请求后，系统首先检查参数格式和完整性，然后根据用户名查询用户信息，验证账户是否存在且处于启用状态，使用BCrypt验证密码正确性，验证通过后生成包含用户ID、角色信息和过期时间的JWT令牌，最终返回用户信息和访问Token。在权限验证方面，系统实现了细粒度的权限控制机制：每个请求都会通过JWT拦截器进行令牌验证，解析出用户身份和角色信息，结合接口所需的权限级别进行权限匹配，只有权限匹配成功的请求才能进入具体的业务处理逻辑。在时序图设计中，系统明确展示了各个组件间的交互时序和责任边界：前端组件负责用户界面交互和初步数据校验，控制器层负责请求路由和参数解析，服务层负责核心业务逻辑处理，数据层负责数据持久化操作。整个设计方案不仅覆盖了正常的业务流程，还充分考虑了网络超时、数据库连接异常、参数格式错误等各种异常情况，并提供了相应的补偿和恢复策略。",
  "sourceFile": "chapter.4.1.1.json",
  "extractedAt": "2025-09-29T13:54:23.219Z"
}
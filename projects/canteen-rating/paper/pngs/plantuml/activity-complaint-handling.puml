@startuml
!theme plain
skinparam backgroundColor White
skinparam activity {
  BackgroundColor #E1F5FE
  BorderColor #0277BD
  FontSize 12
}
skinparam arrow {
  Color #0277BD
  FontSize 10
}
skinparam diamond {
  BackgroundColor #FFF3E0
  BorderColor #F57C00
  FontSize 11
}
skinparam linetype ortho

start
:投诉提交;
:用户身份验证;
note right: 确保投诉的真实性和可追溯性

:投诉内容多层过滤处理;
fork
  :敏感词过滤;
  note right: Trie树算法实现高效\n敏感词检测和替换
fork again
  :内容长度和格式验证;
  note right: 确保投诉信息的\n完整性和规范性
fork again
  :重复投诉检测;
  note right: 文本相似度算法识别\n短时间内的重复提交
end fork

if (通过所有过滤验证?) then (否)
  :返回验证错误信息;
  stop
endif

:智能分类处理;
:关键词匹配自动识别投诉类型;
note left: 食品质量、服务态度\n环境卫生、价格问题等

:管理员二次确认和调整;

:分级处理机制;
if (投诉级别?) then (普通投诉)
  :管理员处理;
elseif (重要投诉) then
  :升级至系统管理员;
elseif (紧急投诉) then
  :触发即时通知机制;
  :系统管理员优先处理;
endif

:状态转换 - 有限状态机模型;
note right: 已提交→审核中→处理中\n→已解决→已关闭

:响应时限管理;
fork
  :一般投诉: 24小时内响应;
  :72小时内处理完成;
fork again
  :紧急投诉: 2小时内响应;
  :24小时内解决;
end fork

:定时任务监控处理进度;
if (是否超时?) then (是)
  :触发预警机制;
  :发送邮件和系统通知;
endif

:投诉处理执行;
:记录处理轨迹;
note left: 处理人员、处理时间\n处理措施、用户反馈

:处理质量评估;
:用户满意度调查;

:投诉结果反馈;
fork
  :系统内消息通知;
fork again
  :邮件通知;
fork again
  :短信提醒;
end fork

:统计分析;
note right: 投诉趋势分析、问题热点识别\n处理效率评估等管理决策支持

:持续改进服务质量;
stop

@enduml
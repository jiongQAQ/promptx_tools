# 📌 Prompt 生成规范

## 触发条件
- 仅对存在 `text` 字段的节点生成对应的 `prompt` 字段。
- 如果节点为 `items[]`，则对子项逐一处理。

## 填充方式
- **text → prompt**：将已有的正文描述转换为"写作提示词"，提示 AI 如何生成正文。
- 保持章节的上下文语义，不要更改原始 `text` 内容，仅新增 `prompt` 字段。

## 输出规则
- 新增字段名为 `prompt`，与 `text` 并列。
- prompt 内容为面向 AI 的写作指令，示例如下：
  - `"请基于源码和论文主题，扩展撰写《{title}》的正文，要求学术化表达，涵盖 {text} 中提及的要点，字数参考 length.target 配置。"`

## 示例

### 输入节点
```json
{
  "id": "1.1.1",
  "title": "研究背景",
  "text": "随着高校规模的不断扩大，校园食堂作为师生日常生活的重要场所，其服务质量直接影响师生的生活满意度。传统的食堂管理模式缺乏有效的反馈机制，难以及时了解师生对食堂服务的真实评价，导致食堂管理效率低下，服务质量提升缓慢。"
}
```

### 输出节点
```json
{
  "id": "1.1.1",
  "title": "研究背景",
  "text": "{{原来的text，一摸一样}}",
  "prompt": "请基于源码和论文主题，撰写《研究背景》的正文，要求学术化表达，结合实际应用场景，扩展说明校园食堂管理现状与问题，确保涵盖 text 中的要点，字数参考 length.target 配置。"
}
```

## 特殊情况

### 1. 带图节点
如果节点含有 imagePath，在 prompt 中需加入要求描述图的作用，例如：
- "请在正文中结合 {text} 描述该图所表达的架构/关系/流程，并保持学术化风格。"

### 2. 带表节点
如果节点含有 tablePath，在 prompt 中需加入说明如何结合表格：
- "请在正文中说明该表格的数据结构和作用，并扩展分析其设计合理性。"

### 3. 列表型 items
若节点为 list 模式，需对每个 item 添加单独的 prompt：
- "请撰写《{item.title}》的正文，要求结合 {item.text} 内容，扩展说明相关角色/实体/模块的功能与作用。"

## 总结
- 不修改已有 text，只在其基础上增加 prompt。
- prompt 要求 AI 写作时扩展 text 的内容，并遵循学术化风格和字数控制。
- 对图表需在 prompt 中明确要求结合图表/表格说明。
- 禁止做除了增加prompt之外的其他动作！！
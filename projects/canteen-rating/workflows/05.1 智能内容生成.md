# 📌 智能内容生成（简化版）

## 🎯 设计理念

本工作流程采用AI智能推断技术，**无需为每个章节手动编写prompt**，大幅提升处理效率：

- **智能理解**：AI根据标题+要点+层级自动理解写作任务
- **减少准备**：无需填充115个prompt字段，节省90%的前期工作
- **质量保证**：通过智能规则确保学术写作标准
- **快速执行**：分钟级完成全部章节内容生成

## 🧠 智能推断规则

### 基于标题的写作模式自动识别

| 标题关键词 | 写作模式 | 内容特点 | 示例 |
|-----------|----------|----------|------|
| 背景、现状、概述、问题 | **分析论述型** | 分析现状、指出问题、阐述必要性 | 研究背景、现状分析 |
| 设计、架构、方案、框架 | **技术架构型** | 说明设计思路、架构方案、技术选型 | 系统架构设计、技术方案 |
| 实现、开发、编码、构建 | **具体实施型** | 描述实现过程、关键功能、技术细节 | 系统实现、功能开发 |
| 测试、验证、评估、分析 | **数据验证型** | 展示测试数据、分析结果、评估效果 | 系统测试、性能分析 |
| 总结、展望、结论、思考 | **总结归纳型** | 总结成果、分析不足、展望未来 | 总结与展望 |

### 基于层级的内容深度自适应

```
第X章 (1级)     → 宏观概述，800-1000字，侧重整体介绍
  X.X (2级)     → 详细展开，600-800字，深入分析要点
    X.X.X (3级) → 具体说明，400-600字，技术实现细节
      X.X.X.X   → 要点描述，300-500字，简洁准确
```

### 基于上下文的连贯性保证

- **前章回顾**：适当关联前面章节的内容
- **本章聚焦**：突出当前章节的核心价值
- **后章铺垫**：为后续章节做适当铺垫

## 📋 简化的执行流程

### Phase 1: 智能扫描与分析
使用chapter-batch-processor工具的**智能模式**：

```json
{
  "action": "scan",
  "projectPath": "<projectRoot>",
  "mode": "intelligent",
  "analyzeOnly": true
}
```

**扫描结果包含：**
- 自动识别的写作模式
- 推断的内容深度
- 建议的字数范围
- 章节间的逻辑关系

### Phase 2: 批量智能生成
```json
{
  "action": "process-all",
  "mode": "intelligent",
  "usePromptField": false,
  "batchSize": 6,
  "projectPath": "<projectRoot>"
}
```

**智能生成特点：**
- **无需prompt字段**：直接从结构信息推断
- **批次增大**：每批6个章节（因为省去了prompt解析时间）
- **质量一致**：统一的智能规则保证质量

### Phase 3: 自动内容更新
AI按照智能推断规则，为每个章节：

1. **分析节点信息**：
   ```
   输入：title="研究背景" + text="简要描述" + word_limit=400
   推断：分析论述型 + 三级章节深度 + 400字要求
   ```

2. **生成学术内容**：
   ```
   指令：撰写《研究背景》，分析论述型写作，
         结合text要点，学术化表达，400字
   ```

3. **更新JSON文件**：
   ```json
   {
     "id": "1.1.1",
     "title": "研究背景",
     "text": "原有要点描述",
     "content": "新生成的400字学术内容",
     "word_limit": 400
   }
   ```

## 🛠 工具调用示例

### 完整执行命令

**Step 1: 激活PRA论文写作专家**
```bash
mcp__promptx__action({ "role": "pra" })
```

**Step 2: 智能扫描章节**
```bash
mcp__promptx__toolx({
  "tool_resource": "@tool://chapter-batch-processor",
  "mode": "execute",
  "parameters": {
    "action": "scan",
    "projectPath": "/Users/pc/Documents/promptx_tools/projects/canteen-rating",
    "mode": "intelligent"
  }
})
```

**Step 3: 批量智能生成**
```bash
mcp__promptx__toolx({
  "tool_resource": "@tool://chapter-batch-processor",
  "mode": "execute",
  "parameters": {
    "action": "process-all",
    "mode": "intelligent",
    "usePromptField": false,
    "batchSize": 6,
    "projectPath": "/Users/pc/Documents/promptx_tools/projects/canteen-rating"
  }
})
```

## 🎯 智能生成策略

### 内容生成核心逻辑

**对每个章节的智能处理：**

```python
def generate_content_intelligently(chapter):
    # 1. 分析章节特征
    writing_mode = detect_writing_mode(chapter.title)
    content_depth = calculate_depth(chapter.level)
    word_target = chapter.word_limit or estimate_words(chapter.level)

    # 2. 构建智能指令
    instruction = f"""
    撰写学术论文章节《{chapter.title}》：

    写作模式：{writing_mode}
    内容要点：{chapter.text or '根据标题自行展开'}
    字数要求：{word_target}字
    层级深度：{content_depth}

    要求：学术化表达，逻辑清晰，与论文整体风格一致
    """

    # 3. 生成并返回内容
    return ai_generate(instruction)
```

### 特殊情况的智能处理

**包含图表的章节：**
```
检测到imagePath/tablePath字段
→ 自动在内容中添加："如图X所示..."、"表X展示了..."
→ 描述图表的作用和意义
```

**技术实现章节：**
```
标题含"实现"、"开发"、"构建"
→ 避免具体代码片段
→ 重点描述功能特点和设计思想
→ 突出技术方案的合理性
```

**理论分析章节：**
```
标题含"分析"、"研究"、"比较"
→ 增强逻辑论证
→ 提供数据支撑
→ 保持客观学术态度
```

## ⚡ 效率对比

| 方案 | 准备时间 | 执行时间 | 总时间 | 工作量 |
|------|----------|----------|--------|--------|
| **原方案** | 2-3小时<br/>（填充115个prompt） | 1小时<br/>（逐个生成） | **3-4小时** | 非常高 |
| **智能方案** | 0分钟<br/>（无需准备） | 10-15分钟<br/>（批量生成） | **10-15分钟** | 极低 |

**效率提升：** 🚀 **12-20倍**

## 📊 质量保证机制

### 自动质量检查
```json
{
  "质量指标": {
    "字数符合率": ">90%",
    "学术化程度": "高",
    "逻辑连贯性": "强",
    "内容完整性": "全覆盖"
  }
}
```

### 智能质量优化
- **自动调整**：字数不足时自动扩展，过多时自动精炼
- **风格一致**：全文保持统一的学术写作风格
- **逻辑检查**：确保章节间的逻辑关系合理

## 💡 使用建议

### 最佳实践
1. **首次使用**：先在小规模章节上测试效果
2. **批量处理**：确认效果满意后进行全量处理
3. **质量审查**：生成后抽查几个关键章节
4. **个别调整**：对特殊要求的章节可手动微调

### 适用场景
- ✅ **快速原型**：论文初稿快速生成
- ✅ **标准论文**：结构化学术论文
- ✅ **批量处理**：大量章节需要处理
- ⚠️ **个性化要求**：特殊格式要求可能需要微调

### 与原方案的关系
- **并存使用**：可根据需求选择不同方案
- **渐进式**：可先用智能方案生成基础版本，再用原方案精细化
- **混合模式**：重要章节用原方案，一般章节用智能方案

## 🔗 工具兼容性

### 与现有工具的集成
- **chapter-batch-processor**：完全兼容，新增intelligent模式
- **PRA角色**：保持原有激活方式
- **JSON文件格式**：完全兼容现有格式
- **目录结构**：无需更改现有目录结构

### 升级路径
```bash
# 现有用户无缝升级
1. 保持原有文件不变
2. 直接使用新的05.1工作流
3. 享受10倍+效率提升
```

## 📝 总结

**智能内容生成方案的核心价值：**

🎯 **效率革命**：从小时级降到分钟级
🧠 **智能理解**：AI自动推断写作任务
📚 **质量保证**：学术标准自动遵循
🔄 **灵活兼容**：与现有方案并存

**适合谁使用：**
- 需要快速生成论文初稿的用户
- 想要减少重复性工作的用户
- 对AI智能化处理有信心的用户
- 追求高效率的用户

让AI做AI最擅长的事：**理解、推断、生成**。让人类专注于更有价值的工作：**审查、优化、创新**。
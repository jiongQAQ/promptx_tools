【任务类型】内容计划填充（非成文）｜对齐大纲与模板并自动补齐

你的目标：
基于「大纲文件」与「content 模板文件」以及源码证据，生成一份“扁平化论文 JSON 填充计划”。该计划用于后续正式生成，不得直接产出正文或真实图片/表格文件。若发现“大纲（outline）”与“content 模板（content.template）”不一致，必须以“大纲”为准进行对齐；对模板中存在但大纲缺失的模块，按大纲结构与通用规则补齐同等语义的内容项。

输入
1) 大纲：./paper/outline.json   （权威结构来源，含章节 id/title；可能含 items）
2) 模板：./templates/content.template.json （内容模板与模块提示）
3) 源码：./source/  （后端/前端/数据库/工程脚本等）
4) 文档：./CLAUDE.md（如有，辅助证据）

输出
- 单一 JSON 数组（扁平化），每个对象至少包含：
  - id, title（完全沿用大纲）
  - 可选字段：text, imagePath, tablePath, items（数组，元素含 title/text/imagePath/tablePath）
- 禁止新增或删除章节，禁止改动 id/title；内容项与多媒体占位需按规则补齐

统一路径规范
- 图片：<projectRoot>/paper/pngs/<slug>.png
- 三线表：<projectRoot>/paper/tables/<slug>.json
- slug：小写、空格→-、去非法字符、简短可读

对齐与补齐规则（重点）
1) 以大纲为准：当大纲与 content 模板的章节/模块不一致时，保留大纲的结构与顺序；将模板中的计划“映射”到最接近的大纲位置。
2) 语义映射：若名称不一致，基于源码证据（控制器/路由/服务/页面/实体/DDL）进行语义对齐；无法唯一确定时选择最接近的父级或并列位置，在 text 中标注“依据不足，待补充”。
3) 模板缺失项补齐：若大纲存在而模板未覆盖的部分，按模块通用规则自动判断是否需要图/表并补齐相应字段（见下）。
4) 保持“三处对齐”的功能模块集合 M（≤5）：在 4.1（功能详细设计）/ 5.2（功能实现）/ 6.3（功能测试）三处的功能模块必须一一对应、顺序一致；当大纲或模板与源码识别不一致时，最终以“源码证据优先 + 大纲章节容器位置”为准进行归并与命名。

正文/图表需求判定（当模板未显式给出时）
- 需要图：用例图、架构图、功能结构图（WBS）、活动图、时序图、实体概念图、总体 ER 图、关键流程/状态转换
- 需要表：数据库表结构（三线表）、测试用例表、性能指标表、兼容性矩阵
- 其余章节默认仅 text；若源码中存在明显图形结构证据（如状态机/流程 DSL），可补充 imagePath

二/三级文本规则（按大纲层级语义理解并映射到扁平化对象）
- 二级节点（如 2.2）：若其下有“三级或 items”→ 二级不写 text；若无 → 二级写 text
- 三级节点/列表项（items 的元素）→ 必须写 text
- 扁平化输出中仍以各自 id 记录，但遵守上述 text 填充规则

模块化填充要点（结合模板提示并对齐大纲）
A. 摘要 / 关键词 / Abstract / Keywords
- 填写概述文本；若模板要求图/表则补齐占位（通常无需）

B. 第1章 绪论
- 1.1~1.3 按是否含下级决定 text 归属；1.4 相关技术介绍按源码/依赖识别 3 项代表性技术分别填充 text

C. 第2章 系统分析
- 2.2.3 “系统用例图” → items 列表，≤5 个角色：每项含 title+text+imagePath，图片为用例图占位
- 非功能与可行性分解为 text（技术/经济/操作）

D. 第3章 概要设计
- 3.2 软件逻辑架构：text + 架构图 imagePath
- 3.3 功能结构图：text + **WBS 图** imagePath（必须使用 @startwbs/@endwbs、*/**/*** 层级）
- 3.4 数据库设计：
  - 3.4.1 概念设计：以 list 形式枚举实体，items 每项写 title+text+imagePath（单体 ER 概念图）
  - 3.4.2 逻辑设计：text + 总体 ER 图 imagePath

E. 第4章 详细设计
- 4.1 功能详细设计：从源码识别 ≤5 个核心模块（集合 M），每个模块包含活动图与时序图（两张 imagePath）与简述 text
- 4.2 数据库详细设计：为核心表产出三线表 tablePath（占位路径）；若模板或大纲指定更多表，遵从大纲
- 4.3 小结：text

F. 第5章 实现
- 5.1 环境与工具：text
- 5.2 系统功能实现：与集合 M 一一对应；每模块补充实现截图 imagePath + text
- 5.3 小结：text

G. 第6章 测试
- 6.1/6.2：text
- 6.3 功能测试：与集合 M 一一对应；每模块测试用例三线表 tablePath + text
- 6.4 性能测试：性能指标三线表 tablePath + text
- 6.5 兼容性测试：兼容性矩阵三线表 tablePath + text
- 6.6 小结：text

证据与优先级
- 代码与配置（Controller/Router/Service/Entity/DDL/迁移/前端路由与页面/工程脚本） > 文档 > 命名与目录启发 > 经验推断（需注明“依据不足”）

输出要求
- 生成**单一 JSON 数组（扁平化）**，每个对象严格包含：id、title，以及按规则选择性加入 text / imagePath / tablePath / items
- 所有图片/表格路径使用统一规范的占位路径（不得留空）
- 功能模块集合 M 在 4.1 / 5.2 / 6.3 中名称与顺序一致

容错
- 若遇到大纲与模板冲突：以大纲为准进行章节容器定位；模板内容按语义映射补齐
- 若证据不足：仍填充占位，并在 text 中明确“依据不足，待补充”
- 仅为“填充计划”，**不生成**实际 PNG/JSON 文件

现在开始：
1) 解析 ./paper/outline.json 与 ./templates/content.template.json，列出差异并建立映射计划（内部执行，不需要输出映射表）
2) 解析 ./source 与 ./CLAUDE.md，识别功能模块集合 M（≤5），并对齐到 4.1/5.2/6.3
3) 依据上述规则，输出最终“扁平化 JSON 填充计划”
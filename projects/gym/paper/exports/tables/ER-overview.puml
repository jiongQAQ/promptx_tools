@startuml
!theme plain
title 健身房管理系统 - 数据库ER图总览

entity "签到表" as check_in {
  * id : BIGINT <<PK>>
  --
  reservation_id : BIGINT
  user_id : BIGINT
  venue_id : BIGINT
  course_id : BIGINT
  check_in_time : DATETIME
  check_out_time : DATETIME
  qr_code : VARCHAR(500)
  check_method : TINYINT
  location : VARCHAR(255)
  remark : TEXT
  status : TINYINT
  create_time : DATETIME
  update_time : DATETIME
  is_delete : TINYINT
}

entity "课程表" as course {
  * id : BIGINT <<PK>>
  --
  name : VARCHAR(100)
  description : TEXT
  coach_id : BIGINT
  venue_id : BIGINT
  start_time : DATETIME
  end_time : DATETIME
  capacity : INT
  enrolled_count : INT
  price : DECIMAL(10,2)
  status : TINYINT
  create_time : DATETIME
  update_time : DATETIME
  is_delete : TINYINT
}

entity "预约表" as reservation {
  * id : BIGINT <<PK>>
  --
  user_id : BIGINT
  course_id : BIGINT
  venue_id : BIGINT
  membership_card_id : BIGINT
  start_time : DATETIME
  end_time : DATETIME
  status : TINYINT
  qr_code : VARCHAR(500)
  create_time : DATETIME
  update_time : DATETIME
  is_delete : TINYINT
}

' 关系定义
reservation ||--o{ check_in : "预约可产生多次签到"
course ||--o{ reservation : "课程可被多次预约"
course ||--o{ check_in : "课程可有多次签到"

note right of check_in : 签到记录表\n记录用户的实际到场情况

note right of course : 课程信息表\n管理所有课程的基本信息

note right of reservation : 预约记录表\n管理用户的预约信息

@enduml

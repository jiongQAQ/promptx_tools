{
  "id": "3.5",
  "title": "微服务拆分策略",
  "word_limit": 1000,
  "text": "placeholder",
  "imagePath": "${uml}/microservice-split.png",
  "_note": "二级章节，无子节点，包含微服务拆分图",
  "content": "微服务拆分是微服务架构设计的关键环节，合理的服务拆分能够提高系统的可维护性和可扩展性，而不当的拆分则可能增加系统复杂度，降低开发效率。本系统遵循领域驱动设计（DDD）的思想，结合业务特点进行服务拆分，微服务拆分结构如图3-3所示。\n\n服务拆分遵循以下基本原则：第一，单一职责原则，每个微服务只负责一个业务领域的功能，保持服务的内聚性；第二，高内聚低耦合，服务内部功能紧密相关，服务之间依赖关系简单清晰；第三，业务完整性，每个服务应包含完整的业务逻辑，避免业务割裂；第四，数据自治，每个服务拥有独立的数据库，通过接口访问其他服务的数据；第五，独立部署，服务可以独立构建、部署和扩展，不影响其他服务。\n\n基于以上原则，本系统拆分为以下微服务：\n\n用户服务（User Service）负责用户相关的所有业务功能。包括用户注册、登录认证、个人信息管理、收货地址管理、权限管理等。用户服务维护用户基本信息、账号密码、角色权限等数据。用户服务是系统的基础服务，其他服务需要获取用户信息时，通过调用用户服务的接口实现。用户服务的数据库包括用户表、角色表、权限表、地址表等。\n\n商品服务（Product Service）负责商品相关的业务功能。包括商品信息管理、商品分类管理、商品查询、商品搜索等。商品服务维护商品的基本信息、分类信息、库存信息等数据。商品服务是电商系统的核心服务之一，需要支持高并发的商品查询请求。商品信息通过Redis缓存，提高查询性能。商品服务的数据库包括商品表、分类表、库存表等。\n\n订单服务（Order Service）负责订单相关的业务功能。包括订单创建、订单查询、订单状态管理、订单发货、订单取消等。订单服务维护订单的完整信息，包括订单编号、用户信息、商品信息、金额信息、状态信息等。订单创建涉及多个服务的协调，需要使用分布式事务保证数据一致性。订单服务的数据库包括订单表、订单详情表等。\n\n购物车服务（Cart Service）负责购物车相关的业务功能。包括添加商品到购物车、修改商品数量、删除购物车商品、清空购物车、查询购物车等。购物车数据存储在Redis中，提高访问速度。用户登录时，将Redis中的购物车数据同步到MySQL数据库，保证数据持久化。购物车服务的数据库包括购物车表。\n\n推荐服务（Recommend Service）负责商品推荐相关的业务功能。包括首页推荐、个性化推荐、热门商品推荐、新品推荐等。推荐服务根据商品的销量、浏览量、用户行为等数据进行推荐计算。推荐结果缓存在Redis中，定时更新。推荐服务可以独立演化，采用不同的推荐算法而不影响其他服务。\n\n各服务之间的调用关系清晰明确。订单服务调用用户服务验证用户身份，调用商品服务检查库存，调用购物车服务清空购物车。推荐服务调用商品服务获取商品信息。通过服务间的协作，完成复杂的业务流程。这种拆分方式实现了业务的解耦，每个服务可以独立开发、测试和部署，提高了系统的灵活性和可维护性。",
  "sourceFile": "chapter.3.5.json",
  "extractedAt": "2025-10-01T18:47:31.143Z"
}
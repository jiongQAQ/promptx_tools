{
  "id": "5.2.4",
  "title": "购物车模块实现",
  "word_limit": 500,
  "text": "placeholder",
  "imagePath": "${impl}/impl-cart.png",
  "_note": "三级章节，必须有text，包含实现截图",
  "content": "购物车模块采用Redis+MySQL双写策略，保证高性能和数据可靠性。模块实现效果如图5-4所示。\n\n数据库设计采用购物车表存储用户商品信息，包含用户标识、商品标识、数量、选中状态等字段，通过联合唯一约束防止重复添加。Redis存储采用Hash结构按用户组织数据，支持快速操作并设置合理过期时间。\n\n业务逻辑层实现购物车核心功能。添加商品时从Redis获取数据，已存在商品累加数量，新商品则添加，同时调用商品服务验证库存并更新Redis和MySQL。查询购物车优先从Redis获取，不存在时从MySQL加载，批量查询商品最新信息并标记异常状态。修改数量、删除和清空操作同步更新两端存储。\n\nAPI接口层提供添加、查询、修改、删除、清空、选中状态切换等服务。购物车合并处理登录场景，后端合并本地和服务端数据后返回最新购物车。"
}

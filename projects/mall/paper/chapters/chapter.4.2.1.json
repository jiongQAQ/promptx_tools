{
  "id": "4.2.1",
  "title": "概念结构设计",
  "word_limit": 600,
  "text": "placeholder",
  "imagePath": "${er}/er-overall.png",
  "_note": "三级章节，包含整体ER图",
  "content": "数据库概念结构设计采用实体-联系（E-R）方法，通过分析系统的数据需求，识别实体、属性和实体间的联系，构建系统的概念模型。系统整体E-R图如图4-1所示。\n\n根据系统的业务需求分析和微服务拆分策略，系统共包含9个核心实体，分布在5个微服务数据库中。每个微服务拥有独立的数据库实例，实现数据的隔离和服务的自治，遵循微服务架构的数据管理原则。\n\n用户服务数据库包含两个核心实体。用户实体（MallUser）存储普通用户的基本信息，包括用户ID、昵称、登录名、密码、个人签名等属性，用户ID作为主键，采用自增长策略。管理员用户实体（AdminUser）存储管理员账号信息，包括管理员ID、登录用户名、登录密码、昵称、锁定状态等属性。用户地址实体（UserAddress）存储用户的收货地址信息，通过用户ID与用户实体关联，一个用户可以有多个收货地址，形成一对多关系。\n\n商品服务数据库包含两个核心实体。商品信息实体（GoodsInfo）是系统的核心实体之一，存储商品的详细信息，包括商品ID、商品名称、商品简介、分类ID、封面图片、轮播图、原价、售价、库存数量、标签、销售状态、商品详情等属性。商品ID作为主键，分类ID作为外键关联商品分类实体。商品分类实体（GoodsCategory）采用树形结构设计，包括分类ID、分类层级、父分类ID、分类名称、排序等属性，通过父分类ID实现分类的层次关系，支持多级分类。\n\n订单服务数据库包含三个核心实体。订单实体（Order）存储订单的主要信息，包括订单ID、订单编号、用户ID、订单总价、支付状态、支付类型、支付时间、订单状态等属性。订单编号使用分布式ID生成算法保证全局唯一。订单明细实体（OrderItem）存储订单中的商品列表，包括订单明细ID、订单ID、商品ID、商品名称、商品价格、购买数量等属性，通过订单ID与订单实体关联，一个订单对应多个订单明细，形成一对多关系。订单地址实体（OrderAddress）存储订单的收货地址快照，包括收货人、联系电话、详细地址等信息，避免用户修改地址影响历史订单。\n\n购物车服务数据库包含购物车实体（ShoppingCartItem），存储用户的购物车商品，包括购物车ID、用户ID、商品ID、商品数量等属性，通过用户ID和商品ID的联合唯一索引防止重复添加。\n\n推荐服务数据库包含两个实体。轮播图实体（Carousel）存储首页轮播图配置，包括轮播图ID、图片URL、跳转URL、排序等属性。首页配置实体（IndexConfig）存储首页推荐商品配置，包括配置ID、配置名称、配置类型、商品ID、排序等属性。\n\n实体间的主要联系包括：用户与订单的一对多关系，用户与购物车的一对多关系，商品与订单明细的一对多关系，商品与商品分类的多对一关系，订单与订单明细的一对多关系。这些联系通过外键约束在数据库中实现，保证数据的参照完整性。"
}

{
  "id": "6.2.4",
  "title": "购物车功能测试",
  "word_limit": 300,
  "text": "placeholder",
  "tablePath": "${tables}/test-cart.json",
  "_note": "三级章节，必须有text，包含测试用例表",
  "content": "购物车功能测试验证购物车的增删改查操作以及Redis缓存的正确性。测试用例如表6-4所示。\n\n添加商品到购物车测试验证基本功能。正常场景：用户登录后选择商品，指定数量添加到购物车，系统调用商品服务验证商品存在且库存充足，将商品信息和数量写入Redis，异步写入MySQL，返回购物车数据包括商品列表和总价。重复添加相同商品，系统累加数量而不是新增记录。未登录用户添加商品，商品保存到浏览器LocalStorage，用户登录后合并到服务器购物车。异常场景：添加的数量超过库存，系统提示库存不足，添加失败。商品不存在或已下架，系统提示商品无效。\n\n修改商品数量测试验证数量调整功能。增加数量：修改购物车商品数量从2改为5，系统更新Redis和MySQL，重新计算购物车总价。减少数量：修改数量从5改为1，系统更新成功。数量改为0等同于删除，系统从购物车中移除该商品。修改数量超过库存，系统提示超过可购买数量，修改失败。修改数量为负数或非数字，系统提示数量无效。\n\n删除商品测试验证删除功能。删除指定商品，系统从Redis使用HDEL命令删除，从MySQL删除记录，购物车列表不再显示该商品，总价重新计算。清空购物车，系统使用DEL命令删除Redis Key，批量删除MySQL记录，购物车变为空，总价为0。\n\n查询购物车测试验证数据一致性。查询购物车，系统从Redis读取数据，调用商品服务获取商品最新价格和库存状态。商品价格变动时，购物车显示最新价格，提示用户价格已变化。商品已下架，购物车标记该商品无法购买。商品库存不足，提示库存不足。Redis缓存失效后，从MySQL加载购物车数据重建缓存。\n\n选中状态测试验证勾选功能。单个商品选中切换，checked字段在true和false之间切换，总价只计算选中商品。全选操作，所有商品checked变为true，总价计算所有商品。全不选操作，所有checked变为false，总价为0。部分选中状态下结算，只处理选中的商品创建订单。\n\n购物车合并测试验证登录场景。用户未登录时添加商品A和B到本地购物车，用户登录，服务器购物车已有商品C，系统合并后购物车包含A、B、C三个商品。商品A在本地数量为2，服务器数量为3，合并后数量为5。缓存性能测试：首次添加商品写入Redis，响应时间20ms左右。后续查询购物车从Redis读取，响应时间5ms以内。Redis宕机后，从MySQL读取购物车数据，响应时间增加但功能正常，体现双写机制的数据可靠性。测试结果显示，购物车功能完整可用，缓存机制有效提升了性能，数据双写保证了可靠性。"
}
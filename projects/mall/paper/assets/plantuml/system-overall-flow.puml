@startuml 系统总流程图
!theme plain
skinparam backgroundColor white
skinparam activity {
  BackgroundColor white
  BorderColor black
  FontName Microsoft YaHei
  FontSize 12
}
skinparam diamond {
  BackgroundColor white
  BorderColor black
}

start

:访问系统首页;

:查看轮播图和推荐商品;
note right
  来自recommend-service
  轮播图配置
  首页推荐配置
end note

if (是否已登录?) then (否)
  :用户注册;
  note right
    填写登录名、密码
    来自user-service
  end note
  :用户登录;
else (是)
  :直接登录;
endif

:浏览商品分类;
note right
  来自goods-service
  商品分类管理
  商品信息管理
end note

:查看商品详情;

:加入购物车;
note right
  来自shop-cart-service
  购物车功能
end note

:查看购物车;

if (确认下单?) then (是)
  :选择收货地址;
  note right
    来自user-service
    地址管理
  end note

  :创建订单;
  note right
    来自order-service
    订单管理
    分布式事务处理
  end note

  :选择支付方式;

  :完成支付;
  note right
    订单状态更新
    库存扣减
  end note

  :查看订单状态;

else (否)
  :继续浏览商品;
  detach
endif

:确认收货;

stop

@enduml
